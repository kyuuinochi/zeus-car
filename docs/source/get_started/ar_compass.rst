7. コンパス
=============================

このプロジェクトでは、Zeus Carをコンパスとして使用します。
まず方向を設定し、その後車をどのように回転させても、設定した方向を向くようになります。

.. note::
    Zeus Carの近くに電気ワイヤが存在する場合、電磁場がqmc6310モジュールの動作に干渉して、車の進行方向が変わる可能性があります。

**操作方法**

#. ESP32-CAMとArduinoボードは、RX（受信）およびTX（送信）のピンが共有されています。コードをアップロードする際は、まずESP32-CAMを切断して、コンフリクトや潜在的な問題を避けてください。

    .. image:: img/unplug_cam.png
        :width: 400
        :align: center

#. ``zeus-car-main\examples\7_compass`` のパスから ``7_compass.ino`` ファイルを開きます。

    .. raw:: html

        <iframe src=https://create.arduino.cc/editor/sunfounder01/672af146-1b45-46f6-b1d9-8ad9ecdcf8c0/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>

#. コードが正常にアップロードされたら、電源スイッチをONにしてZeus Carを起動します。

#. まず、qmc6310モジュールをキャリブレートしましょう。

    * 車を地面に置く（電線が密集している場所から離れるように注意してください）。
    * |ir_mute| を押すと、車はその場で回転します。
    * その場所の磁場が完全に記録されるまで停止します。
    * 2分以上停止しない場合は、 |ir_power| を押して停止させ、別の場所で続行できます。

#. 車を向かせたい方向に向け、 |ir_play| を押します。その後、車をどのように回転させても、ゆっくりと設定した方向に戻ります。

#. 地面とテーブルの磁場は異なり、再キャリブレーションが必要です。





