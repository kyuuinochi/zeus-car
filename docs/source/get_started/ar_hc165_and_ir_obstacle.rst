9. IR 障害物回避
==============================

このプロジェクトでは、Zeus Carの両側にあるIR障害物回避モジュールの使用方法を学びます。

**操作方法**

#. ESP32-CAMとArduinoボードは、RX（受信）およびTX（送信）のピンが共有されています。コードをアップロードする際は、まずESP32-CAMを切断して、コンフリクトや潜在的な問題を避けてください。

    .. image:: img/unplug_cam.png
        :width: 400
        :align: center

#. ``zeus-car-main\examples\9_hc165_and_ir_obstacle`` のパスから ``9_hc165_and_ir_obstacle.ino`` ファイルを開きます。

    .. raw:: html

        <iframe src=https://create.arduino.cc/editor/sunfounder01/3486be01-6b0e-4e84-86f6-9bdadafa1f48/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>

#. コードが正常にアップロードされたら、電源スイッチをONにしてZeus Carを起動します。

    .. note::
        このステップでUSBを抜かないでください。コンピュータ上で2つの障害物回避モジュールのデータを確認する必要があります。

#. シリアルモニターを開き、現在のボーレートが115200に設定されていることを確認してから、印刷されたデータを表示できます。

   * 2つの障害物回避モジュールのいずれも障害物を検出しない場合、シリアルモニターは ``0, 0`` を印刷します。
   * 障害物回避モジュールの一方の前に手を置くと、 ``1, 0`` または ``0, 1`` が印刷されます。

    .. image:: img/ar_serial.png

#. IR障害物回避モジュールをキャリブレートします。

    * IR障害物回避モジュールから約15cm離れた場所に障害物を置きます。
    * モジュールには2つのポテンショメーターがあり、1つは送信電力を調整し、もう1つは送信周波数を調整するためのものです。これらのポテンショメーターを調整することで、検出距離を調整できます。
    * 次に、ポテンショメーターを調整します。15cmでモジュールの信号ランプが点灯する場合、調整が成功しています。そうでない場合は、もう1つのポテンショメーターを調整します。

        .. image:: img/zeus_ir_avoid.jpg

    * 同様にして、もう1つの障害物回避モジュールをキャリブレートします。
