

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Omni Grayscale Module &mdash; SunFounder Zeus Robot Car Kit for Arduino 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="https://ezblock.cc/readDocFile/custom.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ultrasonic Module" href="cpn_ultrasonic_module_xh.html" />
    <link rel="prev" title="Camera Adapter Board" href="cpn_camera_adapter.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SunFounder Zeus Robot Car Kit for Arduino
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get_started/get_started.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="hardware.html">Hardware</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cpn_r3_board.html">SunFounder R3 Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_zeus_car_shield.html">Zeus Car Shield</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_esp_32_cam.html">ESP32 CAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_camera_adapter.html">Camera Adapter Board</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Omni Grayscale Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_ultrasonic_module_xh.html">Ultrasonic Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_ir_obstacle_module.html">IR Obstacle Avoidcance Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_rgb_strip.html">4 RGB LEDs Strip</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_18650_battery.html">18650 Battery</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_tt_motor_xh.html">TT Motor</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpn_mecanum_wheel.html">Mecanum Wheel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder Zeus Robot Car Kit for Arduino</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="hardware.html">Hardware</a> &raquo;</li>
        
      <li>Omni Grayscale Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/hardware/cpn_omni_grayscale_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="omni-grayscale-module">
<h1>Omni Grayscale Module<a class="headerlink" href="#omni-grayscale-module" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../_images/omni_grayscale_front.png"><img alt="../_images/omni_grayscale_front.png" src="../_images/omni_grayscale_front.png" style="width: 300px;" /></a>
<a class="reference internal image-reference" href="../_images/omni_grayscale_back.png"><img alt="../_images/omni_grayscale_back.png" src="../_images/omni_grayscale_back.png" style="width: 300px;" /></a>
<ul class="simple">
<li><p><strong>VREF</strong>: Reference voltage input pin. The value of each sensor is compared to this reference voltage to determine whether to output high or low.</p></li>
<li><p><strong>Q7</strong>: Serial output from the last stage</p></li>
<li><p><strong>PL</strong>: Asynchronous parallel load input (active LOW)</p></li>
<li><p><strong>CP</strong>: Clock input (LOW-to-HIGH edge-triggered)</p></li>
<li><p><strong>5V</strong>: 3.3 to 5V DC Supply Input</p></li>
<li><p><strong>GND</strong>: Ground Input</p></li>
</ul>
<p>This is an Omni Grayscale module for line following and edge detection. Omni means omnidirectional, which means that the module has 8 TCRT5000 transmitting sensors distributed in a circle to detect black lines in any direction.</p>
<p>This allows a robot car like the Zeus Car with Mecanum wheels to follow the line at various angles without having the head of the car facing forward.</p>
<p>The sensitivity of the module in the current environment can be adjusted by modifying the VREF value. In the Zeus Car Shiled, the blue potentiometer is used to adjust the value of the VREF pin.</p>
<p><strong>Working Principle</strong></p>
<ul class="simple">
<li><p><a href="https://datasheetspdf.com/pdf-file/377371/VishayTelefunken/TCRT5000/1" target="_blank">TCRT5000 Reflective Sensor</a></p></li>
</ul>
<p>In the module, eight TCRT5000 transmitter sensors are integrated, which are based on infrared optical reflection and contain an infrared light-emitting diode and a phototransistor covered with a lead material to block visible light.</p>
<a class="reference internal image-reference" href="../_images/tcrt5000_pin.jpg"><img alt="../_images/tcrt5000_pin.jpg" class="align-center" src="../_images/tcrt5000_pin.jpg" style="width: 400px;" /></a>
<p>When working, the infrared light-emitting diode of TCRT5000 continuously emits infrared light (invisible light) with a wavelength of 950nm. When the emitted infrared light is not reflected back by the obstacle or the reflection intensity is insufficient, the phototransistor does not work. When the infrared light is reflected with sufficient intensity and received by the phototransistor at the same time, the phototransistor is in working condition and provides output.</p>
<ul class="simple">
<li><p><a href="https://datasheetspdf.com/pdf-file/1055868/FairchildSemiconductor/LM339/1" target="_blank">LM339 Quad Comparator</a></p></li>
</ul>
<p>There are 2 LM339 chips on this Omni Grayscale Module, containing a total of 8 differential comparators. These differential comparators are used to compare the current sensor value with a reference value to determine whether to output a high or low level. This way you know if a black line is detected.</p>
<img alt="../_images/lm339_chip.png" src="../_images/lm339_chip.png" />
<p>Below is a schematic of one of the channels.</p>
<img alt="../_images/tcrt_lm339.png" src="../_images/tcrt_lm339.png" />
<ul class="simple">
<li><p>Set a reference voltage at the VREF pin (this reference voltage is set via a potentiometer on the Zeus Car Shield) and add this reference voltage to the inverting input (-) of the comparator.</p></li>
<li><p>Add the collector of the TCRT5000 sensor’s phototransistor to the in-phase input (+) of the comparator.</p></li>
<li><p>When the infrared ray emitted by the TCRT5000 sensor is not reflected back or the reflection intensity is insufficient, the photosensitive transistor does not work and the collector is connected to the pull-up resistor to 5V at this time, so the in-phase input (+) of the comparator is greater than the inverting input (-).</p></li>
<li><p>The comparator output is high and the indicator does not light up. And vice versa.</p></li>
<li><p>Since the black surface absorbs light, it reflects less infrared light, so on the black surface, the comparator outputs high and the indicator does not light up.</p></li>
<li><p>The white surface reflects more infrared rays, and the photosensitive transistor conducts, so the value of the in-phase input is smaller than the inverted input, and the comparator outputs low, and the indicator lights up.</p></li>
</ul>
<p>These 8 sensor data are transferred to the Arduino board via 74HC165 (8-bit parallel input serial output shift register).</p>
<ul class="simple">
<li><p><a href="https://datasheetspdf.com/pdf-file/944867/NXP/74HC165/1" target="_blank">74HC165 Shift Register</a></p></li>
</ul>
<p>The 74HC165 is an 8-bit parallel input serial output shift register, which can get mutually exclusive serial outputs (Q0 and Q7) at the final stage. When the parallel read (PL) input is low, the parallel data input from D0 to D7 port will be read into the register asynchronously. And when PL is high, the data will enter the register serially from the DS input, moving one bit to the right on the rising edge of each clock pulse (Q0 → Q1 → Q2, etc.). Using this feature, the parallel-to-serial expansion can be achieved by simply binding the Q7 output to the next level of DS input.</p>
<p>The clock input of the 74HC165 is a “gated or” structure that allows one of the inputs to be used as a low active clock enable (CE) input. The CP and CE pin assignments are independent and can be interchanged for wiring convenience if necessary. CE is allowed to rise from low to high only when CP is high. CP or CE should be set high before the PL rising edge to prevent data displacement in the active state of PL.</p>
<img alt="../_images/74hc165_con.png" src="../_images/74hc165_con.png" />
<p><strong>Features</strong></p>
<ul class="simple">
<li><p>Operating Voltage: 3.3 ~ 5V</p></li>
<li><p>Output: digital (on/off)</p></li>
<li><p>Asynchronous 8-bit parallel load</p></li>
<li><p>Synchronous serial input</p></li>
<li><p>Detection Threshold: adjustable by VREF pin</p></li>
<li><p>Sensor Type：TCRT5000</p></li>
<li><p>Connector Model：ZH1.5-6P</p></li>
<li><p>Operating Temperature: -10 °C to +50 °C</p></li>
<li><p>Dimensions: 80mm x 80mm</p></li>
</ul>
<p><strong>Calibrate the Module</strong></p>
<blockquote>
<div><p>Since each subfloor has different grayscale values, the factory-set grayscale threshold may not be appropriate for your current environment, so you will need to calibrate this module before use. It is recommended that you need to calibrate it whenever the floor color changes a lot.</p>
<ul>
<li><p>Place the Zeus Car on white surface and turn the potentiometer until the gray sensor light is just illuminated.</p>
<blockquote>
<div><img alt="../_images/zeus_line_calibration2.jpg" src="../_images/zeus_line_calibration2.jpg" />
</div></blockquote>
</li>
<li><p>Now let the two greyscale sensors on the side be located just between the black line and white surface, and slowly turn the potentiometer until the signal indicator just goes off.</p>
<blockquote>
<div><img alt="../_images/zeus_line_calibration11.jpg" src="../_images/zeus_line_calibration11.jpg" />
</div></blockquote>
</li>
<li><p>You can move repeatedly over the the black line and white surface to make sure that the lights of the greyscale sensor are off when they are between the the black line and white surface and on when they are on the white surface, indicating that the module is successfully calibrated.</p></li>
</ul>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cpn_ultrasonic_module_xh.html" class="btn btn-neutral float-right" title="Ultrasonic Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cpn_camera_adapter.html" class="btn btn-neutral float-left" title="Camera Adapter Board" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>